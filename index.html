<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>7K Rebirth Cloud Batch Redeemer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-md bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-2xl">
        <h1 class="text-xl font-bold text-center mb-6 text-indigo-400">BATCH REDEEM (CLOUD)</h1>
        
        <div class="space-y-4">
            <input type="text" id="pid" class="w-full bg-black border border-slate-700 rounded-xl p-4 text-center text-xl font-mono text-indigo-300 outline-none focus:border-indigo-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å UID (Member Code)">
            
            <button onclick="startBatchRedeem()" id="btnStart" class="w-full bg-indigo-600 hover:bg-indigo-500 py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2">
                <span id="btnText">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Server-side)</span>
            </button>
        </div>

        <div id="statusArea" class="mt-6 hidden">
            <div class="flex items-center gap-3 mb-4 p-3 bg-indigo-500/10 rounded-xl border border-indigo-500/20">
                <div class="animate-spin rounded-full h-4 w-4 border-2 border-indigo-500 border-t-transparent"></div>
                <span class="text-xs text-indigo-400">‡∏£‡∏∞‡∏ö‡∏ö Cloud ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ</span>
            </div>
            
            <pre id="logBox" class="w-full bg-black rounded-xl p-4 text-[10px] font-mono text-slate-400 h-64 overflow-y-auto whitespace-pre-wrap border border-slate-800"></pre>
        </div>
    </div>

    <script>
        const GAS_URL = "https://script.google.com/macros/s/AKfycbzEfHbeWoQ73gYKpyWrT1M0Tj4WNw0OXmxj64cNIT-A4QLDH6aXcJNSl9PMunwq4B5H/exec";
        
        const CODES = [
            "HAPPYNEWYEAR2026", "7S7E7V7E7N7", "DANCINGPOOKI", "BRANZEBRANSEL", 
            "GRACEOFCHAOS", "SENAHAJASENA", "CHAOSESSENCE", "77EVENT77", 
            "100MILLIONHEARTS", "KEYKEYKEY", "POOKIFIVEKINDS", "LETSGO7K", 
            "GOLDENKINGPEPE", "HALFGOODHALFEVIL", "DELLONSVSKRIS", "TARGETWISH", "OBLIVION" ,"SENASTARCRYSTAL" , "SENA77MEMORY"
        ];

        function startBatchRedeem() {
            const pid = document.getElementById('pid').value.trim();
            if(!pid) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà UID");

            // ‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            document.getElementById('btnStart').disabled = true;
            document.getElementById('btnText').innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ö‡∏ô Cloud...";
            document.getElementById('statusArea').classList.remove('hidden');
            document.getElementById('logBox').innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á Google Server...\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô";

            // ‡πÉ‡∏ä‡πâ JSONP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡πâ‡∏≤‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô
            const script = document.createElement('script');
            const callbackName = 'handleResponse';
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            window[callbackName] = function(data) {
                document.getElementById('logBox').innerText = data.summary;
                document.getElementById('btnStart').disabled = false;
                document.getElementById('btnText').innerText = "‚úÖ ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß!";
                alert("‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö");
                delete window[callbackName];
                document.body.removeChild(script);
            };

            // ‡∏¢‡∏¥‡∏á Request ‡πÅ‡∏ö‡∏ö GET (‡∏™‡πà‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏õ‡πÉ‡∏ô‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
            script.src = `${GAS_URL}?pid=${pid}&codes=${CODES.join(',')}&callback=${callbackName}`;
            document.body.appendChild(script);
        }

        window.onload = () => {
            const saved = localStorage.getItem('tsk_pid_cloud');
            if(saved) document.getElementById('pid').value = saved;
        };
        
        document.getElementById('pid').oninput = (e) => localStorage.setItem('tsk_pid_cloud', e.target.value);
    </script>
</body>
</html>
